<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<meta charset="utf-8">
<body>

<script>
  
function getdata(facilityid){
   $.ajax({
      url:'/marker',
      data:{'facilityid':facilityid},
      success:function(data){
         display(data);
      }
   });
};
$(document).ready(function(){
  var fid=$('#fid').text();  
  	getdata(fid);
	   
});
function display(data){
	
var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
mapOption = { 
    center: new kakao.maps.LatLng(data[0].lat,data[0].lng), // 지도의 중심좌표
    level: 3 // 지도의 확대 레벨
};

var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다

// 마커가 표시될 위치입니다 
var markerPosition  = new kakao.maps.LatLng(data[0].lat,data[0].lng); 

// 마커를 생성합니다
var marker = new kakao.maps.Marker({
position: markerPosition
});

// 마커가 지도 위에 표시되도록 설정합니다
marker.setMap(map);

}

	$('.categories>li>a').click(function(e){
		var href=$(this).attr('href');
		var targetTop = $(href).offset().top;
	    $('html').stop().animate({scrollTop:targetTop}, 300);
	    
	    e.preventDefault();
		});


	function Page__updateIndicatorActive() {
	    var scrollTop = $(window).scrollTop();
	    
	    // 역순으로 검색해야 편하다
	    $($('.page').get().reverse()).each(function(index, node) {
	        var $node = $(this);
	        var offsetTop = parseInt($node.attr('data-offset-top'));
	        
	        if ( scrollTop >= offsetTop ) {
	            // 기존 녀석에게 활성화 풀고
	            $('.page-indicator > ul > li.active').removeClass('active');
	            // 해당하는 녀석에게 활성화 넣고
	            
	            var currentPageIndex = $node.index();
	            $('.page-indicator > ul > li').eq(currentPageIndex).addClass('active');
	            
	            $('html').attr('data-current-page-index', currentPageIndex);
	            
	            return false; // 더 이상 다른 페이지를 검사하지 않는다.
	        }
	    });
	}
	
	// 각 페이지의 offsetTop 속성을 업데이트
	function Page__updateOffsetTop() {
	    
	    $('.page').each(function(index, node) {
	        var $page = $(node);
	        var offsetTop = $page.offset().top;
	        
	        $page.attr('data-offset-top', offsetTop);
	    });
	    
	    // 계산이 바뀌었으니까, 다시 상태 업데이트
	    Page__updateIndicatorActive();
	}
	
	function Page__init() {
	    Page__updateOffsetTop();
	}



</script>
    
    <section class="hero-wrap hero-wrap-2 ftco-degree-bg js-fullheight" style="background-image: url('images/bg_1.jpg');" data-stellar-background-ratio="0.5">
    
      <div class="overlay"></div>
      <div class="container">
        <div class="row no-gutters slider-text js-fullheight align-items-center justify-content-center">
          <div class="col-md-9 ftco-animate pb-5 text-center">
          	<p class="breadcrumbs"><span class="mr-2"><a th:href="@{/index}">Home <i class="ion-ios-arrow-forward"></i></a></span> <span>Facility<i class="ion-ios-arrow-forward"></i></span></p>
            <h1 class="mb-3 bread">FacilityDetail</h1>
          </div>
        </div>
      </div>
    </section>
    <br>
    <br>
    
    <section class="ftco-section">
    	<div class="col-md-2 sidebar ftco-animate">
 		<div class="sidebar-box">
            <form action="#" class="search-form">
              <div class="form-group">
                <span class="icon icon-search"></span>
                <input type="text" class="form-control" placeholder="Type a keyword and hit enter">
              </div>
            </form>
          </div>
          <div class="sidebar-box ftco-animate" >

            <div class="categories" style="height:3000px;">
              <h3>Categories</h3>
              <li class="m"><a th:href="@{#container1}" class="menu-01">시설정보</a></li>
              <li class="m"><a th:href="@{#container2}" class="menu-02">강사진</a></li>
              <li class="m"><a th:href="@{#container3}" class="menu-03">요금상세</a></li>
              <li class="m"><a th:href="@{#container4}" class="menu-04">이용후기</a></li>
              <li class="m"><a th:href="@{#container5}" class="menu-05">상세위치</a></li>



            </div>

          </div>
          </div>
          </section>
    
    <div class="section">
      <div class="container1" id="container1" th:each="fd:${facilitydetail}">
      <div id="fid" th:text="${fd.facilityid}" style="display:none"></div>
        <div class="row justify-content-between">
          <div class="col-lg-7">
            <div class="img-property-slide-wrap">
              <div class="img-property-slide">
                <img th:src="@{/fimages/}+${fd.facilityimg}+'.jpg'"alt="" class="img-fluid" style="width:80%; height:400px;">
              </div>
            </div>
          </div>
          <div class="col-lg-5">
            <strong><p class="facility_name" th:text="${fd.facilityname}" style="font-size:200%;"></p></strong>
            <div style="border-top: 1px solid lightgray;  border-bottom: 1px solid lightgray;">
            <p class="facility_number" th:text="${fd.facilitynumber}" style="font-color:lightgray;"></p>
            <p class="facility_addr" th:text="${fd.facilityaddr}" style="font-color:lightgray;"></p>
            </div>


             
            </div>
          </div>
        </div>
      </div>
      <br>
 
 
 	<section class="ftco-section ftco-agent">
    	<div class="container2" id="container2">
        <h4>강사진</h4>
        <br>
        <div class="row">
       	<div class="col-md-3" th:each="i:${ins}">
		
       		<div class="agent" >
					<div class="img">
					 <a th:href="@{/instructordetail(instructorid=${i.instructorid})}"><img th:src="@{/fimages/}+${i.instructorimg}+'.jpg'"style="width:100%; height:400px;"alt="" ></a>
 				</div>
 				
 				<div class="desc">
 					<h3><a th:text="${i.instructorname}" ></a></h3>
 					<h3><a th:text="${i.instructorcon}"></a></h3>
 				</div>
			  
 			</div>
 			</div>	
  		</div>
       	</div>
       	<br>
       	
       	<div class="container3" id="container3">
       	<h4>이용요금</h4>
       	</div>
       	<br>
       	<div class="container4" id="container4">
       	<h4>이용후기</h4>
       	</div>
       	<br>
       	<h4>상세위치</h4>
       	<div class="container5" id="container5">
            <div class="d-block agent-box p-7">
            <div id="map" style="width:50%;height:350px;"></div>
        </div>       	
       	</div>
     
       	
       	</section>



  </body>
</html>
